#N canvas 614 329 439 637 10;
#X obj 24 109 vsl 16 136 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X text 50 240 Drone Volume;
#X obj 139 417 vradio 16 1 1 4 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X obj 24 57 bng 35 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X text 70 75 Change Note;
#X obj 137 57 tgl 35 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 182 75 Metronome On/Off;
#X text 183 118 Tempo (BPM);
#X text 166 425 Circle of 5ths Up;
#X text 166 441 Circle of 5ths Down;
#X text 166 457 Chromatic Up;
#X text 166 473 Chromatic Down;
#X obj 24 264 s droneVolume;
#X obj 24 89 s changeNote;
#X obj 291 58 s metronomeOnOff;
#X obj 291 103 s tempo;
#X obj 172 497 s direction;
#N canvas 1155 91 669 549 metrodrone 1;
#X obj 155 254 mtof;
#X floatatom 155 226 5 0 0 0 - - - 0;
#X obj 155 388 *~;
#X obj 155 445 dac~;
#X obj 225 331 phasor~;
#X obj 286 394 metro;
#X obj 155 140 i;
#X obj 155 168 + 7;
#X obj 313 367 expr 60000 / $f1;
#N canvas 347 450 412 315 directionChoice 0;
#X msg 146 107 7 -7 1 -1;
#X obj 146 140 list split;
#X obj 146 73 t b f;
#X obj 174 174 unpack f;
#X obj 174 196 outlet;
#X obj 146 43 inlet;
#X connect 0 0 1 0;
#X connect 1 1 3 0;
#X connect 2 0 0 0;
#X connect 2 1 1 1;
#X connect 3 0 4 0;
#X connect 5 0 2 0;
#X restore 283 65 pd directionChoice;
#X msg 283 149 60;
#N canvas 812 380 789 477 drone 0;
#X obj 37 135 osc~;
#X obj 37 187 *~ 1;
#X obj 94 135 osc~;
#X obj 94 187 *~ 0.618644;
#X obj 173 135 osc~;
#X obj 173 187 *~ 0.355932;
#X obj 250 135 osc~;
#X obj 250 187 *~ 0.415254;
#X obj 325 135 osc~;
#X obj 404 135 osc~;
#X obj 481 135 osc~;
#X obj 325 187 *~ 0.220339;
#X obj 404 187 *~ 0.254237;
#X obj 481 187 *~ 0.127119;
#X obj 556 135 osc~;
#X obj 556 187 *~ 0.118644;
#X obj 37 111 * 1;
#X obj 94 111 * 2;
#X obj 173 111 * 3;
#X obj 250 111 * 4;
#X obj 325 111 * 5;
#X obj 404 110 * 6;
#X obj 481 110 * 7;
#X obj 556 109 * 8;
#X obj 37 333 +~;
#X obj 37 382 outlet~;
#X obj 37 44 inlet;
#X connect 0 0 1 0;
#X connect 1 0 24 0;
#X connect 2 0 3 0;
#X connect 3 0 24 0;
#X connect 4 0 5 0;
#X connect 5 0 24 0;
#X connect 6 0 7 0;
#X connect 7 0 24 0;
#X connect 8 0 11 0;
#X connect 9 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 24 0;
#X connect 12 0 24 0;
#X connect 13 0 24 0;
#X connect 14 0 15 0;
#X connect 15 0 24 0;
#X connect 16 0 0 0;
#X connect 17 0 2 0;
#X connect 18 0 4 0;
#X connect 19 0 6 0;
#X connect 20 0 8 0;
#X connect 21 0 9 0;
#X connect 22 0 10 0;
#X connect 23 0 14 0;
#X connect 24 0 25 0;
#X connect 26 0 16 0;
#X connect 26 0 17 0;
#X connect 26 0 18 0;
#X connect 26 0 19 0;
#X connect 26 0 20 0;
#X connect 26 0 21 0;
#X connect 26 0 22 0;
#X connect 26 0 23 0;
#X restore 155 331 pd drone;
#X obj 225 305 * 2;
#X obj 155 358 *~ 0.12;
#X obj 99 357 line~;
#X msg 99 331 \$1 50;
#X msg 42 303 0;
#N canvas 241 365 694 488 clickADSR 0;
#X obj 300 320 +~;
#X obj 370 295 *~;
#X obj 315 166 t b b, f 7;
#X obj 385 271 line~;
#X obj 300 294 *~;
#X obj 315 270 line~;
#X msg 444 187 0 3;
#X obj 238 93 inlet~;
#X obj 181 116 inlet~;
#X obj 315 72 inlet;
#X obj 300 342 outlet~;
#X text 354 342 Combined click and drone output signal;
#X text 67 116 drone input signal;
#X text 123 92 click input signal;
#X text 354 71 (bang) triggers a single click sound;
#X obj 492 98 loadbang;
#X obj 315 98 t b b b, f 22;
#X msg 393 187 1 3;
#X msg 354 187 0 10;
#X obj 315 124 delay 40;
#X text 397 296 click;
#X text 261 295 drone;
#X msg 315 187 1 5, f 4;
#X connect 0 0 10 0;
#X connect 1 0 0 1;
#X connect 2 0 22 0;
#X connect 2 1 18 0;
#X connect 3 0 1 1;
#X connect 4 0 0 0;
#X connect 5 0 4 1;
#X connect 6 0 5 0;
#X connect 7 0 1 0;
#X connect 8 0 4 0;
#X connect 9 0 16 0;
#X connect 15 0 2 0;
#X connect 16 0 19 0;
#X connect 16 1 17 0;
#X connect 16 2 6 0;
#X connect 17 0 3 0;
#X connect 18 0 3 0;
#X connect 19 0 2 0;
#X connect 22 0 5 0;
#X restore 155 415 pd clickADSR;
#N canvas 1322 730 612 499 baseNoteCalc 1;
#X obj 193 29 r baseNote;
#X obj 269 29 r baseOctave;
#X obj 269 181 - 2;
#X obj 269 223 * 12;
#X obj 193 282 +, f 7;
#X obj 205 252 t b f;
#X obj 193 181 + 48;
#X msg 351 113 2;
#X msg 351 153 list /baseOctave \$1;
#X obj 290 372 send toGUI;
#X msg 351 222 list /baseOctaveLabel \$1;
#N canvas 593 151 944 321 baseNoteLabeling 0;
#X obj 56 67 sel 0 1 2 3 4 5 6 7 8 9 10 11, f 111;
#X msg 56 88 C;
#X msg 111 88 C# / Db;
#X msg 166 88 D;
#X msg 221 88 D# / Eb;
#X msg 277 88 E;
#X msg 332 88 F;
#X msg 387 88 F# / Gb;
#X msg 442 88 G;
#X msg 498 88 G# / Ab;
#X msg 553 88 A;
#X msg 608 88 A# / Bb;
#X msg 663 88 B;
#X obj 56 42 inlet;
#X obj 56 267 list prepend /baseNoteLabel;
#X obj 56 289 outlet;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 0 2 3 0;
#X connect 0 3 4 0;
#X connect 0 4 5 0;
#X connect 0 5 6 0;
#X connect 0 6 7 0;
#X connect 0 7 8 0;
#X connect 0 8 9 0;
#X connect 0 9 10 0;
#X connect 0 10 11 0;
#X connect 0 11 12 0;
#X connect 1 0 14 0;
#X connect 2 0 14 0;
#X connect 3 0 14 0;
#X connect 4 0 14 0;
#X connect 5 0 14 0;
#X connect 6 0 14 0;
#X connect 7 0 14 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 10 0 14 0;
#X connect 11 0 14 0;
#X connect 12 0 14 0;
#X connect 13 0 0 0;
#X connect 14 0 15 0;
#X restore 10 180 pd baseNoteLabeling;
#X msg 153 114 10;
#X msg 81 214 list /baseNote \$1;
#X obj 194 435 outlet;
#X text 245 435 (int) the base note comes out here;
#X text 336 291 much of the above deals with initializing the sliders (and labels) for setting the base note and with updating the labels as parameters are changed;
#X obj 351 29 inlet;
#X text 394 29 loadbang;
#X connect 0 0 11 0;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 10 0;
#X connect 3 0 5 0;
#X connect 4 0 14 0;
#X connect 5 0 4 0;
#X connect 5 1 4 1;
#X connect 6 0 4 0;
#X connect 7 0 2 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 10 0 9 0;
#X connect 11 0 9 0;
#X connect 12 0 6 0;
#X connect 12 0 11 0;
#X connect 12 0 13 0;
#X connect 13 0 9 0;
#X connect 17 0 7 0;
#X connect 17 0 12 0;
#X restore 328 149 pd baseNoteCalc;
#X obj 155 196 expr ($i1 - ($i2 % 12)) % 12 + $i2;
#X obj 328 171 t b f f, f 10;
#X obj 283 124 t b b, f 8;
#X obj 283 99 loadbang;
#X obj 42 280 moses 0.02;
#X obj 42 255 r droneVolume;
#X obj 155 78 r changeNote;
#X obj 286 277 r metronomeOnOff;
#X obj 313 298 r tempo;
#X obj 283 35 r direction;
#N canvas 765 393 450 342 noteNames 0;
#X obj 29 8 inlet;
#X obj 29 29 sel 58 59 60 61 62 63 64 65 66 67 68 69;
#X msg 29 246 A#/Bb;
#X msg 48 228 B;
#X msg 67 210 C;
#X msg 86 192 C#/Db;
#X msg 106 174 D;
#X msg 125 156 D#/Eb;
#X msg 144 138 E;
#X msg 164 120 F;
#X msg 183 102 F#/Gb;
#X msg 202 84 G;
#X msg 221 66 G#/Ab;
#X msg 240 48 A;
#X obj 241 273 list prepend set;
#X obj 241 294 list trim;
#X obj 241 315 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X connect 1 3 5 0;
#X connect 1 4 6 0;
#X connect 1 5 7 0;
#X connect 1 6 8 0;
#X connect 1 7 9 0;
#X connect 1 8 10 0;
#X connect 1 9 11 0;
#X connect 1 10 12 0;
#X connect 1 11 13 0;
#X connect 2 0 14 0;
#X connect 3 0 14 0;
#X connect 4 0 14 0;
#X connect 5 0 14 0;
#X connect 6 0 14 0;
#X connect 7 0 14 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 10 0 14 0;
#X connect 11 0 14 0;
#X connect 12 0 14 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X restore 225 255 pd noteNames;
#X obj 225 278 s note;
#N canvas 1318 420 450 300 bangFilter 0;
#X obj 63 44 inlet;
#X obj 62 253 outlet;
#X msg 82 187 1;
#X msg 157 117 0;
#X obj 63 128 t b b b;
#X text 80 209 Filter out bang repeats faster than 100 ms;
#X obj 63 107 spigot 1;
#X obj 82 163 delay 100;
#X connect 0 0 6 0;
#X connect 2 0 6 1;
#X connect 3 0 6 1;
#X connect 4 0 1 0;
#X connect 4 1 7 0;
#X connect 4 2 3 0;
#X connect 6 0 4 0;
#X connect 7 0 2 0;
#X restore 155 107 pd bangFilter;
#X obj 313 321 moses 20;
#X msg 313 341 20;
#X obj 373 321 loadbang;
#X msg 373 342 60;
#X text 45 474 This is the working stuff under the hood (not the interface);
#X connect 0 0 11 0;
#X connect 0 0 12 0;
#X connect 1 0 0 0;
#X connect 1 0 6 1;
#X connect 1 0 29 0;
#X connect 2 0 17 0;
#X connect 4 0 17 1;
#X connect 5 0 17 2;
#X connect 6 0 7 0;
#X connect 7 0 19 0;
#X connect 8 0 5 1;
#X connect 9 0 7 1;
#X connect 10 0 19 0;
#X connect 11 0 13 0;
#X connect 12 0 4 0;
#X connect 13 0 2 0;
#X connect 14 0 2 1;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X connect 17 0 3 0;
#X connect 17 0 3 1;
#X connect 18 0 20 0;
#X connect 19 0 1 0;
#X connect 20 0 19 0;
#X connect 20 1 19 1;
#X connect 21 0 10 0;
#X connect 21 1 18 0;
#X connect 22 0 21 0;
#X connect 23 0 16 0;
#X connect 23 1 15 0;
#X connect 24 0 23 0;
#X connect 25 0 31 0;
#X connect 26 0 5 0;
#X connect 27 0 32 0;
#X connect 28 0 9 0;
#X connect 29 0 30 0;
#X connect 31 0 6 0;
#X connect 32 0 33 0;
#X connect 32 1 8 0;
#X connect 33 0 8 0;
#X connect 34 0 35 0;
#X connect 35 0 8 0;
#X restore 163 576 pd metrodrone;
#X obj 139 289 vradio 16 1 1 5 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 2;
#X obj 171 389 s baseOctave;
#X obj 24 289 vradio 16 1 1 12 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 10;
#X obj 53 505 s baseNote;
#X text 166 299 -2;
#X text 166 331 0;
#X text 166 315 -1;
#X text 166 347 +1;
#X text 166 363 +2;
#X text 50 299 C;
#X text 50 315 C#/Db;
#X text 50 331 D;
#X text 50 347 D#/Eb;
#X text 50 363 E;
#X text 50 379 F;
#X text 50 395 F#/Gb;
#X text 50 411 G;
#X text 50 427 G#/Ab;
#X text 50 443 A;
#X text 50 459 A#/Bb;
#X text 50 475 B;
#X obj 137 107 nbx 3 14 20 500 0 1 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 60 256;
#X connect 0 0 12 0;
#X connect 2 0 16 0;
#X connect 3 0 13 0;
#X connect 5 0 14 0;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 39 0 15 0;
